(window.webpackJsonp = window.webpackJsonp || []).push([[17], { 665: function(t, e) { t.exports = function(t) { var e = typeof t; return t != null && (e == 'object' || e == 'function') } }, 666: function(t, e, n) { var r = n(672); var o = typeof self === 'object' && self && self.Object === Object && self; var c = r || o || Function('return this')(); t.exports = c }, 667: function(t, e, n) { var r = n(666).Symbol; t.exports = r }, 670: function(t, e, n) { 'use strict'; n(365)('link', function(t) { return function(e) { return t(this, 'a', 'href', e) } }) }, 671: function(t, e, n) { var r = n(666); t.exports = function() { return r.Date.now() } }, 672: function(t, e, n) { (function(e) { var n = typeof e === 'object' && e && e.Object === Object && e; t.exports = n }).call(this, n(38)) }, 673: function(t, e, n) { var r = n(674); var o = n(665); var c = n(676); var l = /^[-+]0x[0-9a-f]+$/i; var f = /^0b[01]+$/i; var d = /^0o[0-7]+$/i; var m = parseInt; t.exports = function(t) { if (typeof t === 'number') return t; if (c(t)) return NaN; if (o(t)) { var e = typeof t.valueOf === 'function' ? t.valueOf() : t; t = o(e) ? e + '' : e } if (typeof t !== 'string') return t === 0 ? t : +t; t = r(t); var n = f.test(t); return n || d.test(t) ? m(t.slice(2), n ? 2 : 8) : l.test(t) ? NaN : +t } }, 674: function(t, e, n) { var r = n(675); var o = /^\s+/; t.exports = function(t) { return t ? t.slice(0, r(t) + 1).replace(o, '') : t } }, 675: function(t, e) { var n = /\s/; t.exports = function(t) { for (var e = t.length; e-- && n.test(t.charAt(e)););return e } }, 676: function(t, e, n) { var r = n(677); var o = n(680); t.exports = function(t) { return typeof t === 'symbol' || o(t) && r(t) == '[object Symbol]' } }, 677: function(t, e, n) { var r = n(667); var o = n(678); var c = n(679); var l = r ? r.toStringTag : void 0; t.exports = function(t) { return t == null ? void 0 === t ? '[object Undefined]' : '[object Null]' : l && l in Object(t) ? o(t) : c(t) } }, 678: function(t, e, n) { var r = n(667); var o = Object.prototype; var c = o.hasOwnProperty; var l = o.toString; var f = r ? r.toStringTag : void 0; t.exports = function(t) { var e = c.call(t, f); var n = t[f]; try { t[f] = void 0; var r = !0 } catch (t) {} var o = l.call(t); return r && (e ? t[f] = n : delete t[f]), o } }, 679: function(t, e) { var n = Object.prototype.toString; t.exports = function(t) { return n.call(t) } }, 680: function(t, e) { t.exports = function(t) { return t != null && typeof t === 'object' } }, 681: function(t, e, n) { 'use strict'; var r = n(15); var o = n(224)(6); var c = 'findIndex'; var l = !0; c in [] && Array(1)[c](function() { l = !1 }), r(r.P + r.F * l, 'Array', { findIndex: function(t) { return o(this, t, arguments.length > 1 ? arguments[1] : void 0) } }), n(223)(c) }, 685: function(t, e, n) { var r = n(665); var o = n(671); var c = n(673); var l = Math.max; var f = Math.min; t.exports = function(t, e, n) { var d; var m; var v; var h; var _; var k; var C = 0; var x = !1; var y = !1; var w = !0; if (typeof t !== 'function') throw new TypeError('Expected a function'); function j(time) { var e = d; var n = m; return d = m = void 0, C = time, h = t.apply(n, e) } function $(time) { return C = time, _ = setTimeout(S, e), x ? j(time) : h } function O(time) { var t = time - k; return void 0 === k || t >= e || t < 0 || y && time - C >= v } function S() { var time = o(); if (O(time)) return T(time); _ = setTimeout(S, (function(time) { var t = e - (time - k); return y ? f(t, v - (time - C)) : t }(time))) } function T(time) { return _ = void 0, w && d ? j(time) : (d = m = void 0, h) } function P() { var time = o(); var t = O(time); if (d = arguments, m = this, k = time, t) { if (void 0 === _) return $(k); if (y) return clearTimeout(_), _ = setTimeout(S, e), j(k) } return void 0 === _ && (_ = setTimeout(S, e)), h } return e = c(e) || 0, r(n) && (x = !!n.leading, v = (y = 'maxWait' in n) ? l(c(n.maxWait) || 0, e) : v, w = 'trailing' in n ? !!n.trailing : w), P.cancel = function() { void 0 !== _ && clearTimeout(_), C = 0, d = k = m = _ = void 0 }, P.flush = function() { return void 0 === _ ? h : T(o()) }, P } }, 700: function(t, e, n) {}, 713: function(t, e, n) { 'use strict'; n(700) }, 737: function(t, e, n) { 'use strict'; n.r(e); var r = n(9); var o = n(3); var dialog = (n(364), n(156)); var c = n.n(dialog); var l = (n(54), n(11), n(669)); var f = n(663); var d = (n(369), { head: function() { return { title: '意见反馈', link: this.getLinkRel() } }, data: function() { return { replyID: null, replyContent: '', replyUser: '', replyDialog: !1, feedback_total: 0, feedback_result_count: 0, feedback_currentPage: 1, feedback_pagesize: 10, feedback: { name: '', email: '', content: '' }, feedbackReply: { content: '' }, feedbacksList: [] } }, components: Object(o.a)({ VueEmoji: l.a, Avataaars: f.a }, c.a.Component.name, c.a.Component), methods: { insertText: function(t, e) { if (document.selection)document.selection.createRange().text = e; else if (typeof t.selectionStart === 'number' && typeof t.selectionEnd === 'number') { var n = t.selectionStart; var r = t.selectionEnd; var o = n; var c = t.value; t.value = c.substring(0, n) + e + c.substring(r, c.length), o += e.length, t.selectionStart = t.selectionEnd = o } else t.value += e }, onSelected: function(t) { this.insertText(this.$refs.feedbacks, t) }, openReplyDialog: function(t, e, content) { this.replyDialog = !0, this.replyID = t, this.replyUser = e, this.replyContent = content }, addComment: function() { var t = this; if (!this.feedback.name) return this.$toasted.show('请输入昵称', { theme: 'bubble', position: 'top-center', duration: 1500 }), !1; if (!this.feedback.email) return this.$toasted.show('请输入邮箱', { theme: 'bubble', position: 'top-center', duration: 1500 }), !1; if (this.feedback.name.length < 2) return this.$toasted.show('昵称不能少于2个字', { theme: 'bubble', position: 'top-center', duration: 1500 }), !1; if (this.checkEmail(this.feedback.email) === 1) return this.$toasted.show('邮箱格式错误', { theme: 'bubble', position: 'top-center', duration: 1500 }), !1; if (this.feedback.content.length < 2) return this.$toasted.show('评论内容不能少于2个字', { theme: 'bubble', position: 'top-center', duration: 1500 }), !1; var e = { status: 'draft', ip: this.ip.ip, address: this.getIpAddressString(), useragent: navigator.userAgent, name: this.feedback.name, email: this.feedback.email, content: this.feedback.content }; this.$client.createItem('feedback_collections', e).then(function(e) { e.public && (t.$storage.setUniversal('comment_user', t.feedback.name), t.$storage.setUniversal('comment_email', t.feedback.email), t.feedback.content = '', t.$toasted.show('感谢您的反馈，已提交成功，等待管理员审核！', { theme: 'outline', position: 'top-center', duration: 3e3 })) }) }, getFeedbacks: function(t) { var e = this; return Object(r.a)(regeneratorRuntime.mark(function n() { var r; return regeneratorRuntime.wrap(function(n) { for (;;) switch (n.prev = n.next) { case 0:return r = t || 1, n.next = 3, e.$client.getItems('feedback_collections', { sort: 'sort,-created_on', offset: r * e.feedback_pagesize - e.feedback_pagesize, limit: e.feedback_pagesize, meta: 'total_count,filter_count', fields: 'id,address,useragent,content,name,children.*,created_on', status: 'published' }).then(function(t) { e.feedbacksList = t.data, e.feedback_total = t.meta.total_count, e.feedback_result_count = t.meta.filter_count }); case 3:case 'end':return n.stop() } }, n) }))() }, pageChange: function(t) { this.getFeedbacks(t) } }, mounted: function() { this.getFeedbacks(), this.feedback.name = this.$storage.getUniversal('comment_user'), this.feedback.email = this.$storage.getUniversal('comment_email') } }); var m = d; var v = (n(713), n(6)); var component = Object(v.a)(m, function() { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'soft-layout white bg my-6 py-5' }, [n('section', { staticClass: 'layout-content' }, [n('div', { staticClass: 'container' }, [n('div', { staticClass: 'content-header feedback-header' }, [n('Row', { staticClass: 'h-150', attrs: { type: 'flex', align: 'middle' }}, [n('Col', { attrs: { span: 2 }}, [n('svg', { attrs: { width: '70', height: '60', viewBox: '0 0 125 107', xmlns: 'http://www.w3.org/2000/svg' }}, [n('g', { attrs: { fill: 'none', 'fill-rule': 'evenodd' }}, [n('circle', { staticClass: 'circle-fill', attrs: { cx: '48', cy: '59', r: '48' }}), t._v(' '), n('path', { staticClass: 'path-fill', attrs: { d: 'M58.536 39.713c0-6.884 1.72-14.007 5.163-21.368 3.443-7.36 8.167-13.458 14.173-18.292l11.645 7.91c-3.589 4.98-6.262 10.016-8.02 15.106S78.86 33.598 78.86 39.384v13.623H58.536V39.713z' }}), t._v(' '), n('path', { staticClass: 'path-fill-1', attrs: { d: 'M93.252 39.713c0-6.884 1.722-14.007 5.164-21.368 3.442-7.36 8.166-13.458 14.172-18.292l11.646 7.91c-3.589 4.98-6.262 10.016-8.02 15.106s-2.637 10.529-2.637 16.315v13.623H93.252V39.713z' }})])])]), t._v(' '), n('Col', { attrs: { span: 22 }}, [n('h4', [t._v('\n              留言反馈\n              '), n('span', { staticClass: 'ml-2 fs-18' }, [t._v('(' + t._s(t.feedback_result_count) + ' 条)')])])])], 1)], 1), t._v(' '), n('div', { staticClass: 'comments' }, [n('div', { staticClass: 'comments-form mb-7' }, [n('form', [n('Row', [n('Col', { attrs: { span: 12 }}, [n('div', { staticClass: 'input-group' }, [n('div', { staticClass: 'input-group-prepend' }, [n('span', { staticClass: 'input-group-text' }, [n('i', { staticClass: 'icon-user2 text-muted' })])]), t._v(' '), n('input', { directives: [{ name: 'model', rawName: 'v-model', value: t.feedback.name, expression: 'feedback.name' }], staticClass: 'form-control', attrs: { type: 'text', placeholder: '昵称' }, domProps: { value: t.feedback.name }, on: { input: function(e) { e.target.composing || t.$set(t.feedback, 'name', e.target.value) } }})])]), t._v(' '), n('Col', { attrs: { span: 12 }}, [n('div', { staticClass: 'input-group' }, [n('div', { staticClass: 'input-group-prepend' }, [n('span', { staticClass: 'input-group-text' }, [n('i', { staticClass: 'icon-mail text-muted' })])]), t._v(' '), n('input', { directives: [{ name: 'model', rawName: 'v-model', value: t.feedback.email, expression: 'feedback.email' }], staticClass: 'form-control', attrs: { type: 'text', placeholder: '邮箱' }, domProps: { value: t.feedback.email }, on: { input: function(e) { e.target.composing || t.$set(t.feedback, 'email', e.target.value) } }})])])], 1), t._v(' '), n('textarea', { directives: [{ name: 'model', rawName: 'v-model', value: t.feedback.content, expression: 'feedback.content' }], ref: 'feedbacks', staticClass: 'form-control', attrs: { rows: '5', placeholder: '应用需求及应用推荐请移步到左上角【提交应用】处...' }, domProps: { value: t.feedback.content }, on: { input: function(e) { e.target.composing || t.$set(t.feedback, 'content', e.target.value) } }})], 1), t._v(' '), n('div', { staticClass: 'comments-form-footer d-flex align-items-center pl-5 clearfix' }, [n('a', { directives: [{ name: 'popover', rawName: 'v-popover:face', arg: 'face' }], staticClass: 'nav-link px-0 cursor-pointer' }, [n('i', { staticClass: 'icon-smile fs-18' })]), t._v(' '), n('el-popover', { ref: 'face', attrs: { 'popper-class': 'emoji-popover', placement: 'bottom-start', trigger: 'click' }}, [n('VueEmoji', { on: { onSelected: t.onSelected }})], 1), t._v(' '), n('div', { staticClass: 'comment-post flex-grow text-right' }, [n('button', { staticClass: 'btn btn-theme px-6', on: { click: function(e) { return t.addComment() } }}, [t._v('提交')])])], 1)]), t._v(' '), t.feedbacksList.length == 0 ? n('div', { staticClass: 'py-10 text-center text-muted' }, [n('i', { staticClass: 'icon-face-smile fs-50' }), t._v(' '), n('h4', { staticClass: 'mt-5 opacity-60' }, [t._v('抢占沙发~')])]) : t._e(), t._v(' '), n('ul', { staticClass: 'list' }, t._l(t.feedbacksList, function(e, r) { return n('li', { key: r, staticClass: 'list-item p-0' }, [n('a', { staticClass: 'w-48 mr-3 ml-0' }, [e.name === 'MacWk管理员' ? [n('img', { staticClass: 'circle', attrs: { src: 'https://cdn.macwk.com/assets/images/logo.svg' }})] : [n('avataaars')]], 2), t._v(' '), n('div', { staticClass: 'list-body' }, [n('div', { staticClass: 'd-flex align-items-center' }, [n('span', { staticClass: 'fs-16 text-primary mr-5' }, [t._v(t._s(e.name))]), t._v(' '), n('span', { staticClass: 'opacity-80' }, [n('span', { staticClass: 'fs-12 text-muted mr-3' }, [t._v(t._s(e.address) + '的网友')]), t._v(' '), t.getCommentOsVersion(e.useragent) ? n('span', { staticClass: 'fs-12 text-muted mr-3' }, [t._v(t._s(t.getCommentOsVersion(e.useragent)))]) : t._e(), t._v(' '), n('span', { staticClass: 'fs-12 text-muted mr-3' }, [t._v(t._s(t.getBrowserInfo(e.useragent)))])])]), t._v(' '), n('small', { staticClass: 'd-block text-muted text-ellipsis' }, [t._v('\n                ' + t._s(t._f('toDateTime')(e.created_on)) + '\n              ')]), t._v(' '), n('div', { staticClass: 'pt-4 pb-5 mb-6 bb-dashed' }, [n('div', { staticClass: 'text-light-dark' }, [t._v('\n                  ' + t._s(e.content) + '\n                ')]), t._v(' '), e.children && e.children.length ? n('ul', { staticClass: 'comment-child list mt-5' }, t._l(e.children, function(e, r) { return n('li', { key: r, staticClass: 'list-item bl-0' }, [n('a', { staticClass: 'w-32 mr-3 ml-0' }, [e.name === 'MacWk管理员' ? [n('img', { staticClass: 'circle', attrs: { src: 'https://cdn.macwk.com/assets/images/logo.svg' }})] : [n('avataaars')]], 2), t._v(' '), n('div', { staticClass: 'list-body' }, [n('div', { staticClass: 'd-flex align-items-center' }, [n('span', { staticClass: 'fs-12 text-muted mr-5' }, [t._v(t._s(e.name))])]), t._v(' '), n('div', { staticClass: 'pt-3 fs-14 text-muted pb-3 bb-dashed' }, [t._v('\n                        ' + t._s(e.content) + '\n                      ')])])]) }), 0) : t._e()])])]) }), 0), t._v(' '), t.feedback_result_count > 10 ? n('el-pagination', { staticClass: 'mt-6', attrs: { layout: 'prev, pager, next', 'page-size': 10, 'current-page': t.feedback_currentPage, total: t.feedback_result_count }, on: { 'current-change': t.pageChange, 'update:currentPage': function(e) { t.feedback_currentPage = e }, 'update:current-page': function(e) { t.feedback_currentPage = e } }}) : t._e()], 1)])])]) }, [], !1, null, null, null); e.default = component.exports } }])
