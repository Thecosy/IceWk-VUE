(window.webpackJsonp = window.webpackJsonp || []).push([[0], { 664: function(t, e, n) { 'use strict'; var r = { throttleLimit: 50, loopCheckTimeout: 1e3, loopCheckMaxCalls: 10 }; var o = (function() { var t = !1; try { var e = Object.defineProperty({}, 'passive', { get: function() { return t = { passive: !0 }, !0 } }); window.addEventListener('testpassive', e, e), window.remove('testpassive', e, e) } catch (t) {} return t }()); var l = { STATE_CHANGER: ['emit `loaded` and `complete` event through component instance of `$refs` may cause error, so it will be deprecated soon, please use the `$state` argument instead (`$state` just the special `$event` variable):', '\ntemplate:', '<infinite-loading @infinite="infiniteHandler"></infinite-loading>', "\nscript:\n...\ninfiniteHandler($state) {\n  ajax('https://www.example.com/api/news')\n    .then((res) => {\n      if (res.data.length) {\n        $state.loaded();\n      } else {\n        $state.complete();\n      }\n    });\n}\n...", '', 'more details: https://github.com/PeachScript/vue-infinite-loading/issues/57#issuecomment-324370549'].join('\n'), INFINITE_EVENT: '`:on-infinite` property will be deprecated soon, please use `@infinite` event instead.', IDENTIFIER: 'the `reset` event will be deprecated soon, please reset this component by change the `identifier` property.' }; var c = { INFINITE_LOOP: ['executed the callback function more than '.concat(r.loopCheckMaxCalls, ' times for a short time, it looks like searched a wrong scroll wrapper that doest not has fixed height or maximum height, please check it. If you want to force to set a element as scroll wrapper ranther than automatic searching, you can do this:'), '\n\x3c!-- add a special attribute for the real scroll wrapper --\x3e\n<div infinite-wrapper>\n  ...\n  \x3c!-- set force-use-infinite-wrapper --\x3e\n  <infinite-loading force-use-infinite-wrapper></infinite-loading>\n</div>\nor\n<div class="infinite-wrapper">\n  ...\n  \x3c!-- set force-use-infinite-wrapper as css selector of the real scroll wrapper --\x3e\n  <infinite-loading force-use-infinite-wrapper=".infinite-wrapper"></infinite-loading>\n</div>\n    ', 'more details: https://github.com/PeachScript/vue-infinite-loading/issues/55#issuecomment-316934169'].join('\n') }; var d = { READY: 0, LOADING: 1, COMPLETE: 2, ERROR: 3 }; var f = { color: '#666', fontSize: '14px', padding: '10px 0' }; var h = { mode: 'development', props: { spinner: 'default', distance: 100, forceUseInfiniteWrapper: !1 }, system: r, slots: { noResults: 'No results :(', noMore: 'No more data :)', error: 'Opps, something went wrong :(', errorBtnText: 'Retry', spinner: '' }, WARNINGS: l, ERRORS: c, STATUS: d }; var m = (n(19), n(47), n(8)); var v = (n(55), { BUBBLES: { render: function(t) { return t('span', { attrs: { class: 'loading-bubbles' }}, Array.apply(Array, Array(8)).map(function() { return t('span', { attrs: { class: 'bubble-item' }}) })) } }, CIRCLES: { render: function(t) { return t('span', { attrs: { class: 'loading-circles' }}, Array.apply(Array, Array(8)).map(function() { return t('span', { attrs: { class: 'circle-item' }}) })) } }, DEFAULT: { render: function(t) { return t('i', { attrs: { class: 'loading-default' }}) } }, SPIRAL: { render: function(t) { return t('i', { attrs: { class: 'loading-spiral' }}) } }, WAVEDOTS: { render: function(t) { return t('span', { attrs: { class: 'loading-wave-dots' }}, Array.apply(Array, Array(5)).map(function() { return t('span', { attrs: { class: 'wave-item' }}) })) } }}); var w = { name: 'Spinner', computed: { spinnerView: function() { return v[(this.$attrs.spinner || '').toUpperCase()] || this.spinnerInConfig }, spinnerInConfig: function() { return h.slots.spinner && typeof h.slots.spinner === 'string' ? { render: function() { return this._v(h.slots.spinner) } } : Object(m.a)(h.slots.spinner) === 'object' ? h.slots.spinner : v[h.props.spinner.toUpperCase()] || v.DEFAULT } }}; var E = (n(710), n(6)); var y = Object(E.a)(w, function() { var t = this; var e = t.$createElement; return (t._self._c || e)(t.spinnerView, { tag: 'component' }) }, [], !1, null, '4b642ee6', null).exports; n(45); function I(t) { h.mode !== 'production' && console.warn('[Vue-infinite-loading warn]: '.concat(t)) } function L(t) { console.error('[Vue-infinite-loading error]: '.concat(t)) } var S = { timers: [], caches: [], throttle: function(t) { var e = this; this.caches.indexOf(t) === -1 && (this.caches.push(t), this.timers.push(setTimeout(function() { t(), e.caches.splice(e.caches.indexOf(t), 1), e.timers.shift() }, h.system.throttleLimit))) }, reset: function() { this.timers.forEach(function(t) { clearTimeout(t) }), this.timers.length = 0, this.caches = [] } }; var C = { isChecked: !1, timer: null, times: 0, track: function() { var t = this; this.times += 1, clearTimeout(this.timer), this.timer = setTimeout(function() { t.isChecked = !0 }, h.system.loopCheckTimeout), this.times > h.system.loopCheckMaxCalls && (L(c.INFINITE_LOOP), this.isChecked = !0) } }; var T = { key: '_infiniteScrollHeight', getScrollElm: function(t) { return t === window ? document.documentElement : t }, save: function(t) { var e = this.getScrollElm(t); e[this.key] = e.scrollHeight }, restore: function(t) { var e = this.getScrollElm(t); typeof e[this.key] === 'number' && (e.scrollTop = e.scrollHeight - e[this.key] + e.scrollTop), this.remove(e) }, remove: function(t) { void 0 !== t[this.key] && delete t[this.key] } }; function N(t) { return t.replace(/[A-Z]/g, function(s) { return '-'.concat(s.toLowerCase()) }) } function R(t) { return t.offsetWidth + t.offsetHeight > 0 } var A = { name: 'InfiniteLoading', data: function() { return { scrollParent: null, scrollHandler: null, isFirstLoad: !0, status: d.READY, slots: h.slots } }, components: { Spinner: y }, computed: { isShowSpinner: function() { return this.status === d.LOADING }, isShowError: function() { return this.status === d.ERROR }, isShowNoResults: function() { return this.status === d.COMPLETE && this.isFirstLoad }, isShowNoMore: function() { return this.status === d.COMPLETE && !this.isFirstLoad }, slotStyles: function() { var t = this; var e = {}; return Object.keys(h.slots).forEach(function(n) { var r = N(n); (!t.$slots[r] && !h.slots[n].render || t.$slots[r] && !t.$slots[r][0].tag) && (e[n] = f) }), e } }, props: { distance: { type: Number, default: h.props.distance }, spinner: String, direction: { type: String, default: 'bottom' }, forceUseInfiniteWrapper: { type: [Boolean, String], default: h.props.forceUseInfiniteWrapper }, identifier: { default: +new Date() }, onInfinite: Function }, watch: { identifier: function() { this.stateChanger.reset() } }, mounted: function() { var t = this; this.$watch('forceUseInfiniteWrapper', function() { t.scrollParent = t.getScrollParent() }, { immediate: !0 }), this.scrollHandler = function(e) { t.status === d.READY && (e && e.constructor === Event && R(t.$el) ? S.throttle(t.attemptLoad) : t.attemptLoad()) }, setTimeout(function() { t.scrollHandler(), t.scrollParent.addEventListener('scroll', t.scrollHandler, o) }, 1), this.$on('$InfiniteLoading:loaded', function(e) { t.isFirstLoad = !1, t.direction === 'top' && t.$nextTick(function() { T.restore(t.scrollParent) }), t.status === d.LOADING && t.$nextTick(t.attemptLoad.bind(null, !0)), e && e.target === t || I(l.STATE_CHANGER) }), this.$on('$InfiniteLoading:complete', function(e) { t.status = d.COMPLETE, t.$nextTick(function() { t.$forceUpdate() }), t.scrollParent.removeEventListener('scroll', t.scrollHandler, o), e && e.target === t || I(l.STATE_CHANGER) }), this.$on('$InfiniteLoading:reset', function(e) { t.status = d.READY, t.isFirstLoad = !0, T.remove(t.scrollParent), t.scrollParent.addEventListener('scroll', t.scrollHandler, o), setTimeout(function() { S.reset(), t.scrollHandler() }, 1), e && e.target === t || I(l.IDENTIFIER) }), this.stateChanger = { loaded: function() { t.$emit('$InfiniteLoading:loaded', { target: t }) }, complete: function() { t.$emit('$InfiniteLoading:complete', { target: t }) }, reset: function() { t.$emit('$InfiniteLoading:reset', { target: t }) }, error: function() { t.status = d.ERROR, S.reset() } }, this.onInfinite && I(l.INFINITE_EVENT) }, deactivated: function() { this.status === d.LOADING && (this.status = d.READY), this.scrollParent.removeEventListener('scroll', this.scrollHandler, o) }, activated: function() { this.scrollParent.addEventListener('scroll', this.scrollHandler, o) }, methods: { attemptLoad: function(t) { var e = this; this.status !== d.COMPLETE && R(this.$el) && this.getCurrentDistance() <= this.distance ? (this.status = d.LOADING, this.direction === 'top' && this.$nextTick(function() { T.save(e.scrollParent) }), typeof this.onInfinite === 'function' ? this.onInfinite.call(null, this.stateChanger) : this.$emit('infinite', this.stateChanger), !t || this.forceUseInfiniteWrapper || C.isChecked || C.track()) : this.status === d.LOADING && (this.status = d.READY) }, getCurrentDistance: function() { var t; this.direction === 'top' ? t = typeof this.scrollParent.scrollTop === 'number' ? this.scrollParent.scrollTop : this.scrollParent.pageYOffset : t = this.$el.getBoundingClientRect().top - (this.scrollParent === window ? window.innerHeight : this.scrollParent.getBoundingClientRect().bottom); return t }, getScrollParent: function() { var t; var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.$el; return typeof this.forceUseInfiniteWrapper === 'string' && (t = e.querySelector(this.forceUseInfiniteWrapper)), t || (e.tagName === 'BODY' ? t = window : (!this.forceUseInfiniteWrapper && ['scroll', 'auto'].indexOf(getComputedStyle(e).overflowY) > -1 || e.hasAttribute('infinite-wrapper') || e.hasAttribute('data-infinite-wrapper')) && (t = e)), t || this.getScrollParent(e.parentNode) } }, destroyed: function() { !this.status !== d.COMPLETE && (S.reset(), T.remove(this.scrollParent), this.scrollParent.removeEventListener('scroll', this.scrollHandler, o)) } }; var O = A; var $ = (n(711), Object(E.a)(O, function() { var t = this; var e = t.$createElement; var n = t._self._c || e; return n('div', { staticClass: 'infinite-loading-container' }, [n('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.isShowSpinner, expression: 'isShowSpinner' }], staticClass: 'infinite-status-prompt', style: t.slotStyles.spinner }, [t._t('spinner', function() { return [n('spinner', { attrs: { spinner: t.spinner }})] })], 2), t._v(' '), n('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.isShowNoResults, expression: 'isShowNoResults' }], staticClass: 'infinite-status-prompt', style: t.slotStyles.noResults }, [t._t('no-results', function() { return [t.slots.noResults.render ? n(t.slots.noResults, { tag: 'component' }) : [t._v(t._s(t.slots.noResults))]] })], 2), t._v(' '), n('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.isShowNoMore, expression: 'isShowNoMore' }], staticClass: 'infinite-status-prompt', style: t.slotStyles.noMore }, [t._t('no-more', function() { return [t.slots.noMore.render ? n(t.slots.noMore, { tag: 'component' }) : [t._v(t._s(t.slots.noMore))]] })], 2), t._v(' '), n('div', { directives: [{ name: 'show', rawName: 'v-show', value: t.isShowError, expression: 'isShowError' }], staticClass: 'infinite-status-prompt', style: t.slotStyles.error }, [t._t('error', function() { return [t.slots.error.render ? n(t.slots.error, { tag: 'component', attrs: { trigger: t.attemptLoad }}) : [t._v('\n        ' + t._s(t.slots.error) + '\n        '), n('br'), t._v(' '), n('button', { staticClass: 'btn-try-infinite', domProps: { textContent: t._s(t.slots.errorBtnText) }, on: { click: t.attemptLoad }})]] }, { trigger: t.attemptLoad })], 2)]) }, [], !1, null, 'ecb5dde6', null).exports); function P(t) { h.mode = t.config.productionTip ? 'development' : 'production' }Object.defineProperty($, 'install', { configurable: !1, enumerable: !1, value: function(t, e) { Object.assign(h.props, e && e.props), Object.assign(h.slots, e && e.slots), Object.assign(h.system, e && e.system), t.component('infinite-loading', $), P(t) } }), typeof window !== 'undefined' && window.Vue && (window.Vue.component('infinite-loading', $), P(window.Vue)); e.a = $ }, 697: function(t, e, n) {}, 698: function(t, e, n) {}, 710: function(t, e, n) { 'use strict'; n(697) }, 711: function(t, e, n) { 'use strict'; n(698) } }])
